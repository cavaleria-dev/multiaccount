# Cursor AI Rules - Проект интеграции МойСклад

Используй правила из .clinerules файла.

## Дополнительные правила для Cursor

### При генерации кода:

1. **Laravel контроллеры:**
   - Всегда добавляй типизацию: `function method(Request $request): JsonResponse`
   - Используй `DB::table()` вместо Eloquent для простых запросов
   - Логируй все операции через `Log::info()`
   - Оборачивай в try-catch с `Log::error()` в catch блоке

2. **Роуты:**
   - Группируй по префиксам: `Route::prefix('api/...')`
   - Добавляй middleware для логирования если нужно
   - Всегда добавляй комментарии с описанием группы

3. **Миграции:**
   - Используй `$table->uuid()` для ID связанных с МойСклад
   - Всегда добавляй `timestamps()`
   - Добавляй индексы на поля для поиска и связей
   - Пиши метод `down()` для отката

4. **Frontend (Vue 3):**
   - Composition API предпочтительнее Options API
   - Используй TypeScript типы где возможно
   - Tailwind классы вместо custom CSS

### При рефакторинге:

- Не удаляй логирование
- Не меняй логику удаления данных (только статусы!)
- Сохраняй обратную совместимость с МойСклад API

### При дебаге:

- Сначала проверь логи: `storage/logs/laravel.log`
- Затем проверь права доступа к файлам
- Потом проверь кеш конфигурации
- Используй debug endpoint: `/api/debug/test-log`

### Не делай:

- ❌ Не удаляй данные из БД (только статусы!)
- ❌ Не используй `Log::error()` для обычных операций
- ❌ Не забывай про timezone (Europe/Moscow)
- ❌ Не коммить .env файлы
- ❌ Не меняй структуру данных от МойСклад без обсуждения
